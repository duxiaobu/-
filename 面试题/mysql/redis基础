### Redis相关概念

1. 为什么要使用缓存

   - 减轻关系型数据库的访问压力
   - 加快响应，内存IO速度比磁盘速度快，提升性能
   - 支持高并发，内存型数据库接收的请求并发更多

2.  Redis有哪些持久化方法

   -  RDB

     隔一段时间去备份数据，优点：恢复数据快，可以最大化Redis的性能，在保存RDB文件时，只需要fork一个子进程，父进程无须执行任何I/O操作；缺点：断电宕机等情况，容易丢失时间间隔中的数据

   - AOF

     根据不同的fsync策略记录每次Redis写操作命令，默认fsync是1s1次。优点：数据保存完整；缺点：恢复慢，AOF文件体积比RDB的文件体积大

3. Redis事务

   Redis为我们提供了一个简单的事务，它确保在该事务内这些命令是原子性的，但不支持回滚操作，如果事务中命令错误，那么事务不会执行，如果事务运行时某个命令错误，那么会跳过该命令继续执行。不过它给我们提供了一种类似于乐观锁的机制来监控，利用watch命令监控某个key，在提交事务前检查该key是否被改动过，没有的话就会执行事务。

4. Redis分布式锁

   分布式锁是分布式系统之间同步访问共享资源的一种方式，在分布式系统中或者同一个系统中不同主机操作同一个资源时，往往需要互斥来保证数据一致性，这时就需要分布式锁。   可以使用Redis自身来实现，因为Redis是单线程单进程的，采用队列模式将并发访问编程串行访问，可以使用SETNX命令来实现。SETNX key value返回1时，则获取锁，完成操作后，使用del删除锁；返回0时表示有其他客户端占用锁。   避免死锁：   如果获得锁的客户端宕机了，就会造成死锁，这是可以通过设置key的过期时间来解决该问题。具体做法：使用SETNX设置值时，再使用expire设置key的存活时间。

5. 主从模式和哨兵模式的区别

   为了提高Redis的稳定性和可扩展性，我们通常不会采用单机模式，因为一旦宕机，redis便不能提供服务，而是采取主从、哨兵、集群这3中方式，主从：一般主库可读可写，从库默认只读不写，但是可以修改配置文件以让其可读可写，但是主库宕机的话，从库不能自动成为主库，导致系统中只能读缓存，而不能写缓存；哨兵：启动主从库的同时，启动一个或多个哨兵监控着redis的运行情况，当主库宕机后，在x秒(可配置)后，就从从库中选举一个作为主库，当之前的主库再次启动时，也只能作为新主库的从库了。

